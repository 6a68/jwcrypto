<head>
  <title>test VEP from Browser</title>
  <script type="text/javascript" src="vepbundle.js"></script>
  <script type="text/javascript">
    // a small subset of vows tests
    function runtests() {
      var jwk = require("./jwk");
      var jwt = require("./jwt");
      var jwcert = require("./jwcert");
      var user_kp = jwk.KeyPair.generate("RS",64);
      var root_kp = jwk.KeyPair.generate("RS",64);
      var cert = new jwcert.JWCert("foo.com", new Date(), user_kp.publicKey, {email : "foo@foo.com"}).sign(root_kp.secretKey);

      var tok = new jwt.JWT(null, new Date(), "rp.com").sign(user_kp.secretKey);
      alert("cert:\n" + cert + "\nassertion:\n" + tok);
    }

    function runperftests() {
      var jwk = require("./jwk");
      var start = new Date();
      for (var i = 0; i<10; i++)
        jwk.KeyPair.generate("RS",64);
      var end = new Date();
      alert(end-start);
    }

    function runperftests2() {
      var jwk = require("./jwk");
      var start = new Date();
      for (var i = 0; i<10; i++)
        jwk.KeyPair.generate("RS",64);
      var end = new Date();
      alert(end-start);
    }
  </script>
</head>
<body>
<button onclick="runtests();">run tests</button>
<button onclick="runperftests();">run perf tests</button>
<button onclick="runperftests2();">run perf tests 2</button>
</body>
